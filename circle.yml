machine:
  node:
    version: 4.4.7
  environment:
    PATH: "${PATH}:${HOME}/${CIRCLE_PROJECT_REPONAME}/node_modules/.bin"

general:
  artifacts:
    - "dist/"
    - "docs/dist/"
    - "test/component/coverage/"
    - "test/integration/artifacts/"
    - "test/unit/coverage/"

dependencies:
  override:
    - curl -u${ARTIFACTORY_USER}:${ARTIFACTORY_PWD} "https://qliktech.artifactoryonline.com/qliktech/api/npm/npm-local/auth/qlik" > ./.npmrc
    - yarn
  cache_directories:
    - ~/.cache/yarn
  post:
    - npm run lint
    - npm run build
    - cd docs && npm install && npm run docs

test:
  override:
    - npm run test:coverage
